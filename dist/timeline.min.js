/**
 * mobile-timeline - A timeline focused on a mobile-first strategy (i.e. vertical)
 * @version v0.0.1
 * @link https://github.com/datanews/mobile-timeline
 * @license MIT
 */
"use strict";!function(e,t){"undefined"!=typeof module&&module.exports&&"function"==typeof require?module.exports=t(require("underscore"),require("moment")):"function"==typeof define&&define.amd?define(["underscore","moment"],t):e.Timeline=t(e._,e.moment)}("undefined"!=typeof window?window:this,function(e,t){if("undefined"==typeof e)throw new Error("Underscore is a necessary dependency of Timeline.");if("undefined"==typeof t)throw new Error("Moment is a necessary dependency of Timeline.");var n={dateFormats:["MMM DD, YYYY","MM/DD/YYYY","M/D/YYYY","DD MMM YYYY","YYYY-MM-DD"]},o=function(o){var r=this;if(this.options=e.extend({},n,o||{}),!e.isArray(this.options.events))throw new Error('"events" data was not provided as an array.');if(this.options.columnMapping&&!e.isObject(this.options.columnMapping))throw new Error('"columnMapping" was not provided as an object.');this.events=this.mapColumns(this.options.events,this.options.columnMapping),this.events=e.map(this.events,function(e){var n=t(e.date,r.options.dateFormats);if(!n.isValid())throw new Error('Error parsing date from "'+e.date+'"');return e.date=n,e}),this.groups=this.groupEvents(this.events)};return e.extend(o.prototype,{render:function(){console.log(this)},groupEvents:function(n){var o,r={};return this.groupType=this.determineGroups(this.events),o="groupBy"+this.groupType.charAt(0).toUpperCase()+this.groupType.slice(1),o=this[o],e.each(n,function(n){var i=e.bind(o,this)(n,t);r[i.id]?r[i.id].events.push(n):(r[i.id]=i,r[i.id].events=[n])}),e.values(r)},groupByMonths:function(e,t){return{id:e.date.format("YYYY-MM"),date:t(e.date.format("YYYY-MM"),"YYYY-MM")}},groupByYears:function(e,t){return{id:e.date.format("YYYY"),date:t(e.date.format("YYYY"),"YYYY")}},groupByDecades:function(e,t){var n=10*Math.floor(e.date.year()/10);return{id:n.toString(),date:t(n.toString(),"YYYY")}},determineGroups:function(t){var n=function(e){return e.date.unix()},o=e.min(t,n),r=e.max(t,n),i=r.date.diff(o.date,"years");return 2>i?"months":10>i?"years":"decades"},mapColumns:function(t,n){return n=n||{},e.map(t,function(t){var o=e.clone(t);return e.each(n,function(n,r){e.isUndefined(t[n])||n===r||(o[r]=e.clone(t[n]),delete o[n])}),o})}}),o});